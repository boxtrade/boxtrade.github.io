# 参考

[指标回测 - SuperMind](http://quant.10jqka.com.cn/view/backtest/indexstrategy)



http://backtest.10jqka.com.cn/





# 基本语法

## 变量命名

1. 变量的命名可以包含字母，数字，下划线。
2. 变量名长度不得超过32个字符。
3. 不能包含同花顺语法标准中规定的操作符（包括中英文输入法）以及空格符。
4. 变量不允许是系统函数名，变量不允许数字开头。

**示例**

```cpp
MA30:=MA(C,30);
TOP:=HIGH*2;
VAR1:=CLOSE+10020;
```

## **数据类型**

#### 数值型

包括整数、浮点数

```cpp
A:=2; 
B:=3.1;
```

#### 布尔型

`True`或`False`

`A:=CLOSE>OPEN;`

## 操作符

操作符是一种符号标识，用于参与指标代码的运算、赋值、逻辑判断等。操作符根据作用类型可以分为算术操作符，关系操作符，逻辑操作符等。

**算术操作符**

| **操作符** | **描述** | **用法举例**       |
| ------- | ------ | -------------- |
| `+`     | **加法** | `A:1+5;` //返回6 |
| `-`     | **减法** | `A:5-1;`//返回4  |
| `*`     | **乘法** | `A:1*5;`//返回5  |
| `/`     | **除法** | `A:5/1;`//返回5  |
| `%`     | **取余** | `A:5%2;`//返回1  |

**关系操作符**

| **操作符**    | **描述**    | **用法举例**            |
| ---------- | --------- | ------------------- |
| `=`        | **相等**    | `10=10;`//返回 `True` |
| `<`        | **小于**    | `5<10;`//返回 `True`  |
| `<=`       | **小于或等于** | `5<=10;`//返回 `True` |
| `>`        | **大于**    | `10>5;`//返回 `True`  |
| `>=`       | **大于或等于** | `10>=5;`//返回 `True` |
| `!=`或 `<>` | **不等于**   | `9!=10;`//返回 `True` |

**逻辑操作符**

| **操作符**     | **描述**  | **用法举例**                                                        |
| ----------- | ------- | --------------------------------------------------------------- |
| `AND`或 `&&` | **逻辑与** | `A:=CLOSE>OPEN AND CLOSE>REF(CLOSE,1);`//判断当前是否是阳线且收盘价大于上一周期收盘价 |
| `OR`或`\|`   | **逻辑或** | `A:=CLOSE>OPEN OR CLOSE>REF(CLOSE,1);` //判断当前是否是阳线或收盘价大于上一周期收盘价 |
| `NOT`       | **逻辑非** | `A:=NOT(CLOSE>OPEN);`//判断当前是否不是阳线                               |

**其他操作符**

| **操作符** | **描述**                       | **用法举例**                        |
| ------- | ---------------------------- | ------------------------------- |
| `:=`    | **赋值**                       | `A:=CLOSE;`//将收盘价赋值给变量A         |
| `:`     | **赋值并且输出到图中，以原始坐标系展示**       | `B:CLOSE;`//将收盘价赋值给变量B,并输出到图中。  |
| `..`    | **赋值并且输出到图中，并以独立坐标系展示**      | `B..CLOSE;`//将收盘价赋值给变量B,并输出到图中。 |
| `;`     | **用于代码语句结尾时使用，一句代码必须以分号结尾。** | `A:100;`//定义A为100，并输出到图中。       |
| `,`     | **一般用于分割函数参数。**              | 一般用于分割函数参数。                     |

## 条件判断

条件判断结构要求程序员指定一个或多个要评估或测试的条件，以及条件为真时要执行的语句（必需的）和条件为假时要执行的语句（可选的）。

SuperMind提供了`IF...ELSE...`类型的判断语句，如下：

```cpp
// 如果当前为阳线，则执行买入，否则执行卖出
IF (CLOSE>OPEN){
    BUY(100);
}
ELSE{
    SELL(100);
}
```

也可以写成：

`// 如果当前为阳线，则执行买入，否则执行卖出 IF (CLOSE>OPEN) {     BUY(100); } ELSE {     SELL(100); }`

## 注释

注释可以标记某行或者某段代码在执行过程中不被编译，也就是不执行“注释符号”后面的内容，通常用来标注代码的含义以及一些备注信息，方便代码复查时，可以快速理解、回忆。

**单行注释**

`//`之后的代码不参与编译执行

```cpp
A:=1;
//A:=2;    //该行被注释
```

**多行注释**

被`/* */` 包裹的代码段不参与编译执行

```cpp
/*A:=1;B:=2;*/      //两行代码都被注释，即不参与编译执行
```

# 数据引用

#### 参考手册

基本语法

变量

操作符

条件判断

注释

# 数据引用

## OPEN

`OPEN` 返回当前周期的开盘价，可简写为`O`

**例1**

```cpp
OO:=O;    //定义OO为开盘价；注意O与0的区别。
```

**例2**

```cpp
NN:=BARSLAST(DATE<>REF(DATE,1));
OO:=REF(O,NN);   //取当日的开盘价
```

**例3**

```cpp
MA5:=MA(O,5);    //定义开盘价的5周期均线（O为OPEN简写）
```

## HIGH

`HIGH` 返回当前周期的最高价，可简写为`H`

**例1**

```cpp
HH:=H;         // 定义HH为最高价
```

**例2**

```cpp
HH:=HHV(H,5);  // 取5个周期内最高价的最大值
```

**例3**

```
REF(H,1);      // 取前一根K线的最高价
```

LOW

CLOSE

VOL

DATE

TIME

REF

数学函数

MAX

MIN

STD

STDP

ABS

LN

SQRT

SUM

POW

ROUND

AVEDEV

统计函数

HV

HHV

HHVBARS

LV

LLV

LLVBARS

COUNT

BARSLAST

BARSLASTCOUNT

SUMBARS

BARSSINCEN

MA

EMA

WMA

SMA

DMA

逻辑判断函数

EVERY

IF

CROSS

VALUEWHEN

账户管理

CASH

INITEQUITY

EQUITY

HOLDING

AVHOLDING

交易系统

BUY

ISLASTBUY

BARSBUY

BUYPRICE

BUYAVGPRICE

SELL

ISLASTSELL

BARSSELL

SELLPRICE
